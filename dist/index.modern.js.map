{"version":3,"file":"index.modern.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\n\ntype Props = {\n  allowedCharacters?: 'alpha' | 'numeric' | 'alphanumeric';\n  ariaLabel?: string;\n  length?: number;\n  containerClassName?: string;\n  inputClassName?: string;\n  isPassword?: boolean;\n  onChange: (res: string) => void;\n};\n\ntype InputMode = 'text' | 'numeric';\n\ntype InputType = 'text' | 'number' | 'password';\n\ntype InputProps = {\n  type: InputType;\n  inputMode: InputMode;\n  pattern: string;\n  min?: string;\n  max?: string;\n};\n\nconst propsMap: { [key: string]: InputProps } = {\n  alpha: {\n    type: 'text',\n    inputMode: 'text',\n    pattern: '[a-zA-Z]{1}'\n  },\n\n  alphanumeric: {\n    type: 'text',\n    inputMode: 'text',\n    pattern: '[a-zA-Z0-9]{1}'\n  },\n\n  numeric: {\n    type: 'number',\n    inputMode: 'numeric',\n    pattern: '[0-9]{1}',\n    min: '0',\n    max: '9'\n  }\n};\n\nconst AuthCode: React.FC<Props> = ({\n  allowedCharacters = 'alphanumeric',\n  ariaLabel,\n  length = 6,\n  containerClassName,\n  inputClassName,\n  isPassword = false,\n  onChange\n}) => {\n  const inputsRef = useRef<Array<HTMLInputElement>>([]);\n\n  const inputProps = propsMap[allowedCharacters];\n\n  useEffect(() => {\n    inputsRef.current[0].focus();\n  }, []);\n\n  const sendResult = () => {\n    const res = inputsRef.current.map((input) => input.value).join('');\n    onChange && onChange(res);\n  };\n\n  const handleOnChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const {\n      target: { value, nextElementSibling }\n    } = e;\n    if (value.length > 1) {\n      e.target.value = value.charAt(0);\n      if (nextElementSibling !== null) {\n        (nextElementSibling as HTMLInputElement).focus();\n      }\n    } else {\n      if (value.match(inputProps.pattern)) {\n        if (nextElementSibling !== null) {\n          (nextElementSibling as HTMLInputElement).focus();\n        }\n      } else {\n        e.target.value = '';\n      }\n    }\n    sendResult();\n  };\n\n  const handleOnKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    const { key } = e;\n    const target = e.target as HTMLInputElement;\n    if (key === 'Backspace') {\n      if (target.value === '' && target.previousElementSibling !== null) {\n        if (target.previousElementSibling !== null) {\n          (target.previousElementSibling as HTMLInputElement).focus();\n          e.preventDefault();\n        }\n      } else {\n        target.value = '';\n      }\n      sendResult();\n    }\n  };\n\n  const handleOnFocus = (e: React.FocusEvent<HTMLInputElement>) => {\n    e.target.select();\n  };\n\n  const handleOnPaste = (e: React.ClipboardEvent<HTMLInputElement>) => {\n    const pastedValue = e.clipboardData.getData('Text');\n\n    let currentInput = 0;\n\n    for (let i = 0; i < pastedValue.length; i++) {\n      const pastedCharacter = pastedValue.charAt(i);\n      const currentValue = inputsRef.current[currentInput].value;\n      if (pastedCharacter.match(inputProps.pattern)) {\n        if (!currentValue) {\n          inputsRef.current[currentInput].value = pastedCharacter;\n          if (inputsRef.current[currentInput].nextElementSibling !== null) {\n            (inputsRef.current[currentInput]\n              .nextElementSibling as HTMLInputElement).focus();\n            currentInput++;\n          }\n        }\n      }\n    }\n    sendResult();\n\n    e.preventDefault();\n  };\n\n  const inputs = [];\n  for (let i = 0; i < length; i++) {\n    inputs.push(\n      <input\n        key={i}\n        onChange={handleOnChange}\n        onKeyDown={handleOnKeyDown}\n        onFocus={handleOnFocus}\n        onPaste={handleOnPaste}\n        {...inputProps}\n        type={isPassword ? 'password' : inputProps.type}\n        ref={(el: HTMLInputElement) => (inputsRef.current[i] = el)}\n        maxLength={1}\n        className={inputClassName}\n        autoComplete={i === 0 ? 'one-time-code' : 'off'}\n        aria-label={\n          ariaLabel\n            ? `${ariaLabel}. Character ${i + 1}.`\n            : `Character ${i + 1}.`\n        }\n      />\n    );\n  }\n\n  return <div className={containerClassName}>{inputs}</div>;\n};\n\nexport default AuthCode;\n"],"names":["propsMap","alpha","type","inputMode","pattern","alphanumeric","numeric","min","max","AuthCode","allowedCharacters","ariaLabel","length","containerClassName","inputClassName","isPassword","onChange","inputsRef","useRef","inputProps","useEffect","current","focus","sendResult","res","map","input","value","join","handleOnChange","e","target","nextElementSibling","charAt","match","handleOnKeyDown","key","previousElementSibling","preventDefault","handleOnFocus","select","handleOnPaste","pastedValue","clipboardData","getData","currentInput","i","pastedCharacter","currentValue","inputs","push","React","onKeyDown","onFocus","onPaste","ref","el","maxLength","className","autoComplete"],"mappings":"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"}